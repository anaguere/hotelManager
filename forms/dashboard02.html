{% extends "base.html.twig" %}
{% block content_wrapper %}


<section class="content-header">
    <h1>
        Reporte Recepción 
        <small>{{ dato.hoy }}</small>
    </h1>

</section>

<!-- Main content -->
<section class="content">


    <div class="row">
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-green"><i class="fa fa-thumbs-up"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Check in<br>Día de Hoy</span>
                    <span class="info-box-number" style="font-size: 30px">{{ dashboard.cantidad_checkin }}</span>
                </div><!-- /.info-box-content -->
            </div><!-- /.info-box -->
        </div><!-- /.col -->


        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-blue-gradient"><i class="fa fa-bed"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Check Out <br> Día de Hoy </span>
                    <span class="info-box-number" style="font-size: 30px"> {{ dashboard.cantidad_checkout }}  </span>
                </div><!-- /.info-box-content -->
            </div><!-- /.info-box -->
        </div><!-- /.col -->



        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow-active"><i class="fa fa-bed"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Habitaciones<br> Vacantes</span>
                    <span class="info-box-number" style="font-size: 30px">{{ dashboard.habitaciones_vacantes }} </span>
                </div><!-- /.info-box-content -->
            </div><!-- /.info-box -->
        </div><!-- /.col -->

        <!-- fix for small devices only -->
        <div class="clearfix visible-sm-block"></div>



        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-red"><i class="fa  fa-remove"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Habitaciones <br> Fuera de Servicio </span>
                    <span class="info-box-number" style="font-size: 30px"> {{ dashboard.habitaciones_fueraservicio }}</span>
                </div><!-- /.info-box-content -->
            </div><!-- /.info-box -->
        </div><!-- /.col -->




    </div><!-- /.row -->


    <div class="row">
        <!-- left column -->
        <div class="col-md-8">
            <!-- general form elements -->

            <div class="row">
                <!-- left column -->
                <div class="col-md-4">

                    <div class="small-box bg-blue-gradient">
                        <div class="inner">
                            <h3>{{ dashboard.catidad_huespedes }} <i class="fa fa-user" ></i></h3>
                            <p style="font-size:26px; font-weight: bold">Huespedes</p> 


                        </div>
                        <div class="icon">
                            <i class="fa fa-user"></i>
                        </div>
                        <a href="#" class="small-box-footer">
                            Más detalles <i class="fa fa-arrow-circle-right"></i>
                        </a>
                    </div>

                </div>
                <div class="col-md-4">

                    <div class="small-box bg-yellow">
                        <div class="inner">
                            <h3>{{ dashboard.reservaciones }} </h3>
                            <p style="font-size:26px; font-weight: bold">Reservaciones</p>
                        </div>
                        <div class="icon">
                            <i class="fa fa-calendar"></i>
                        </div>
                        <a href="#" class="small-box-footer">
                            Más Detalles<i class="fa fa-arrow-circle-right"></i>
                        </a>
                    </div>

                </div>       

                <div class="col-md-4">

                    <div class="small-box bg-green">
                        <div class="inner">
                            <h3>{{ dashboard.ocupaciones }}</h3>
                            <p style="font-size:26px; font-weight: bold">Ocupaciones</p>
                        </div>
                        <div class="icon">
                            <i class="fa fa-bed"></i>
                        </div>
                        <a href="#" class="small-box-footer">
                            Más Detalles <i class="fa fa-arrow-circle-right"></i>
                        </a>
                    </div>

                </div>        

            </div>




            <div class="box box-success collapsed-box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-user"></i> <h3 class="box-title">  Huespedes Actuales </h3>
                    <input type="hidden" name="empresa_id" value="{{ reservaciones[0].empresa_id }}" >

                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body">

                    <table id="example1" class="table table-bordered table-striped" style="font-size: 12px">
                        <thead>

                            <tr>

                                <th style="width:5%"><i class="fa fa-file-text-o"></i>N° ID   </th>
                                <th style="width:65%"><i class="fa fa-user"></i> Nombre Completo</th>    
                                <th style="width:15%"><i class="fa fa-mail-forward"> </i>Email</th>
                                <th style="width:15%" > <i class="fa fa-phone"> </i> Teléfono </th>  
                            </tr>

                        </thead>
                        <tbody>

                            {% for cliente in dashboard.checkin_list %}  
                            <tr>
                                <td>{{ cliente.cliente_documento }}</td>
                                <td>{{ cliente.cliente_nombre }} {{ cliente.cliente_apellido }} </td>       
                                <td>{{ cliente.cliente_correo }}</td>                                    
                                <td>{{ cliente.cliente_telefono }}</td>                                    

                            </tr>

                            {% endfor %}
                        </tbody>

                    </table>



                </div><!-- /.box-body -->
            </div><!-- /.box -->



            <div class="box box-danger collapsed-box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-calendar"></i> <h3 class="box-title">  Ocupaciones de Hoy  </h3>
                    <input type="hidden" name="empresa_id" value="{{ reservaciones[0].empresa_id }}" >

                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body">

                    <table id="example3" class="table table-bordered table-striped" style="font-size: 12px">
                        <thead>
                            <tr>
                                <th style="width:5%"><i class="fa fa-tag"></i> LOC  </th> 
                                <th style="width:30%">     <i class="fa fa-calendar"></i>Salida</th>
                                <th  style="width:40%" > <i class="fa fa-user"></i> Huesped Principal </th>
                                <th style="width:25%" > <i class="fa fa-bed"> </i> Habitación</th>                        

                            </tr>
                        </thead>
                        <tbody>
                            {% for ocupacion in dashboard.checkin_list %}      
                            <tr>
                                <td style="font-weight: bold">
                                  <a href="?opcion=tarjeta&codigo={{ ocupacion.get }}"><i class="fa fa-newspaper-o"></i></a>  
                                  <a href="?opcion=busquedareservacion&codigo={{ ocupacion.get }}">{{ ocupacion.reservacion_codigo }}</a>
                                </td>
                                <td>{{ ocupacion.reservacion_desde }} <b>-</b> {{ ocupacion.reservacion_hasta }}</td>
                                <td>{{ ocupacion.cliente_nombre }} {{ ocupacion.cliente_apellido }}
                                </td>
                                <td>
                                    {{ ocupacion.reservacion_categoria }}  {{ ocupacion.reservacion_nombre }}     <i class="fa fa-users "></i> {{ ocupacion.personas }}   <i class="fa fa-credit-card text-green"> </i>
                                </td>    
                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>



                </div><!-- /.box-body -->
            </div><!-- /.box -->     





            <div class="box box-warning collapsed-box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-calendar"></i> <h3 class="box-title">  Reservaciones Pendientes </h3>
                    <input type="hidden" name="empresa_id" value="{{ reservaciones[0].empresa_id }}" >

                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body">

                    <table id="example2" class="table table-bordered table-striped" style="font-size: 12px">
                        <thead>
                            <tr>
                                <th style="width:5%"><i class="fa fa-tag"></i> LOC  </th> 
                                <th style="width:30%">     <i class="fa fa-calendar"></i>Salida</th>
                                <th  style="width:50%" > <i class="fa fa-user"></i> Huesped Principal </th>
                                <th style="width:15%" > <i class="fa fa-bed"> </i> Habitación</th>                    

                            </tr>
                        </thead>
                        <tbody>
                            {% for reservacion in dashboard.reservaciones_list %}   
                            <tr>
                                <td>
                                   <a href="?opcion=tarjeta&codigo={{ reservacion.get }}"><i class="fa fa-newspaper-o"></i></a>  
                                  <a href="?opcion=busquedareservacion&codigo={{ reservacion.get }}">{{ reservacion.reservacion_codigo }}
                                        </a>   
                                    </strong> 
                                </td>
                                <td>{{ reservacion.reservacion_desde }} - {{ reservacion.reservacion_hasta }}</td>
                                <td>{{ reservacion.cliente_documento  }} [ {{ reservacion.cliente_nombre  }} {{ reservacion.cliente_apellido  }} ] </td>
                                <td>
                                    {{ reservacion.reservacion_nombre  }} {{ reservacion.reservacion_categoria  }}  {{ reservacion.personas }} <i class="fa fa-users"></i>
                                </td>                       

                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>



                </div><!-- /.box-body -->
            </div><!-- /.box -->

            <div class="box box-success collapsed-box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-wrench"></i> <h3 class="box-title">  Supervisiones </h3>


                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body">

                    <table id="example1" class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th style="width:30%"><i class="fa fa-bed"></i> Habitación  </th> 
                                <th style="width:10%">     <i class="fa fa-calendar-o"></i> Fecha </th>
                                <th style="width:10%">     <i class="fa fa-clock-o"></i> Hora </th>                                
                                <th style="width:60%">     <i class="fa fa-wrench"></i> Falla </th>
                       

                            </tr>
                        </thead>
                        <tbody>
                            {% for supervision in supervisiones %}      
                            <tr>
                                <td style="font-weight: bold">
                                    {{ supervision.supervision_solucionado|raw }} &nbsp;&nbsp;  <a href="?opcion=busquedasupervision&codigo={{ supervision.supervision_id }}">

                                        {{ supervision.habitacion_nombre }}  {{ supervision.habitacion_categoria }}</a>
                                </td>
                                <td>{{ supervision.supervision_fecha }}</td>
                                <td>{{ supervision.supervision_hora }}</td>
                                <td>{{ supervision.falla_nombre }} <small>{{ supervision.supervision_observacion }}</small></td>
                  

                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>




                </div><!-- /.box-body -->
            </div><!-- /.box -->

        </div><!--/.col (right) -->

        <div class="col-md-4">


            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Reporte Ama de llaves </h3>
                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                        <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-7">
                            <div class="chart-responsive">
                                <canvas id="pieChart" height="150"></canvas>
                            </div><!-- ./chart-responsive -->
                        </div><!-- /.col -->
                        <div class="col-md-5">
                            <ul class="chart-legend clearfix">
                                <li><i class="fa fa-circle text-green"></i> {{ dashboard.resumen_amallaves['VL']  }}  VL</li>
                                <li><i class="fa fa-circle text-blue"></i> {{ dashboard.resumen_amallaves['VS']  }}  VS  </li>
                                <li><i class="fa fa-circle text-yellow"></i> {{ dashboard.resumen_amallaves['OL']  }}   OL </li>
                                <li><i class="fa fa-circle text-red"></i> {{ dashboard.resumen_amallaves['OS']  }}  OS </li>

                            </ul>
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.box-body -->

            </div><!-- /.box -->


            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Tarifas actualizadas </h3>
                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                        <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">


                    <table id="example5" class="table table-bordered table-striped" style="font-size: 12px">
                        <thead>
                            <tr>
                                <th style="width:60%"><i class="fa fa-hotel"></i> Tipo Tarifa   </th> 
                                <th style="width:20%">     <i class="fa fa-user"></i>Per</th>
                                <th  style="width:20%" > <i class="fa fa-dollar"></i> Costo </th>

                            </tr>
                        </thead>
                        <tbody>
                            {% for tarifa in dashboard.tarifa %}   
                            <tr>

                                <td> {{ tarifa.servicio_denominacion }}</td>
                                <td> {{ tarifa.tarifa_personas  }}  </td>
                                <td>
                                    {{ tarifa.servicio_total|number_format(0, ',', '.') }}
                                </td>                       

                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>     

                </div><!-- /.box-body -->

            </div><!-- /.box -->






        </div>





    </div>   <!-- /.row -->
</section><!-- /.content -->





<section class="content">


    <div class="row">
        <div class="col-md-12 col-sm-6 col-xs-12">




        </div>
    </div>
</section>








{% endblock %}

{% block javascript %}

<script src="plugins/chartjs/Chart.min.js" type="text/javascript"></script>
<script src="dist/js/demo.js" type="text/javascript"></script>

<script src="plugins/datatables/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="plugins/datatables/dataTables.bootstrap.min.js" type="text/javascript"></script>
<script type="text/javascript">
        $(function() {

        $("#example1").dataTable();
                $("#example2").dataTable();
                $("#example3").dataTable();
        });
        $(function() {

        //- PIE CHART -
        //-------------
        // Get context with jQuery - using jQuery's .get() method.
        var pieChartCanvas = $("#pieChart").get(0).getContext("2d");
                var pieChart = new Chart(pieChartCanvas);
                var PieData = [
                {
                value: {{ dashboard.resumen_amallaves['VL']  }},
                        color: "#00a65a",
                        highlight: "#585858",
                        label: "Vacante Limpia"
                },
                {
                value: {{ dashboard.resumen_amallaves['VS']  }},
                        color: "#08088A",
                        highlight: "#585858",
                        label: "Vacante Sucia"
                },
                {
                value: {{ dashboard.resumen_amallaves['OL']  }},
                        color: "#f39c12",
                        highlight: "#585858",
                        label: "Ocupada Limpia"
                },
                {
                value: {{ dashboard.resumen_amallaves['OS']  }},
                        color: "#DF0101",
                        highlight: "#585858",
                        label: "Ocupada Sucia"
                }
                ];
                var pieOptions = {
                //Boolean - Whether we should show a stroke on each segment
                segmentShowStroke: true,
                        //String - The colour of each segment stroke
                        segmentStrokeColor: "#fff",
                        //Number - The width of each segment stroke
                        segmentStrokeWidth: 2,
                        //Number - The percentage of the chart that we cut out of the middle
                        percentageInnerCutout: 50, // This is 0 for Pie charts
                        //Number - Amount of animation steps
                        animationSteps: 100,
                        //String - Animation easing effect
                        animationEasing: "easeOutBounce",
                        //Boolean - Whether we animate the rotation of the Doughnut
                        animateRotate: true,
                        //Boolean - Whether we animate scaling the Doughnut from the centre
                        animateScale: false,
                        //Boolean - whether to make the chart responsive to window resizing
                        responsive: true,
                        // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
                        maintainAspectRatio: false
                        //String - A legend template
                };
                //Create pie or douhnut chart
                // You can switch between pie and douhnut using the method below.
                pieChart.Doughnut(PieData, pieOptions);
        });
</script>

{% endblock %}








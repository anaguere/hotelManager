{% extends "base.html.twig" %}


{% block content_wrapper %}


<section class="content-header">
    <h1>
        Reporte Gerencial 
        <small>{{ dato.hoy }}</small>
    </h1>

</section>

<!-- Main content -->
<section class="content">


    <div class="row">
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-green"><i class="fa fa-thumbs-up"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Porcentaje  <br> Ocupación</span>
                    <span class="info-box-number" style="font-size: 30px">90 %</span>
                </div><!-- /.info-box-content -->
            </div><!-- /.info-box -->
        </div><!-- /.col -->
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-yellow-active"><i class="fa fa-bed"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Habitaciones<br> Vacantes</span>
                    <span class="info-box-number" style="font-size: 30px"> 46 </span>
                </div><!-- /.info-box-content -->
            </div><!-- /.info-box -->
        </div><!-- /.col -->

        <!-- fix for small devices only -->
        <div class="clearfix visible-sm-block"></div>

        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-blue-gradient"><i class="fa fa-bed"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Habitaciones <br> Ocupadas</span>
                    <span class="info-box-number" style="font-size: 30px"> 35 </span>
                </div><!-- /.info-box-content -->
            </div><!-- /.info-box -->
        </div><!-- /.col -->

        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box">
                <span class="info-box-icon bg-red"><i class="fa  fa-remove"></i></span>
                <div class="info-box-content">
                    <span class="info-box-text">Habitaciones <br> Fuera de Servicio </span>
                    <span class="info-box-number" style="font-size: 30px"> 10 </span>
                </div><!-- /.info-box-content -->
            </div><!-- /.info-box -->
        </div><!-- /.col -->




    </div><!-- /.row -->


    <div class="row">
        <!-- left column -->
        <div class="col-md-8">
            <!-- general form elements -->

            <div class="row">
                <!-- left column -->
                <div class="col-md-4">

                    <div class="small-box bg-blue-gradient">
                        <div class="inner">
                            <h3>{{ dashboard.clientes }} <i class="fa fa-user" ></i></h3>
                            <p style="font-size:26px; font-weight: bold">Huespedes</p> 
                            <h4>{{ dashboard.masculino }} <i class="fa fa-male" ></i> &nbsp;&nbsp;{{ dashboard.femenino }} <i class="fa fa-female" ></i></h4>

                        </div>
                        <div class="icon">
                            <i class="ion ion-person"></i>
                        </div>
                        <a href="#" class="small-box-footer">
                            Más detalles <i class="fa fa-arrow-circle-right"></i>
                        </a>
                    </div>

                </div>
                <div class="col-md-4">

                    <div class="small-box bg-yellow">
                        <div class="inner">
                            <h3>{{ dashboard.reservaciones }} </h3>
                            <p style="font-size:26px; font-weight: bold">Reservaciones</p>
                        </div>
                        <div class="icon">
                            <i class="fa fa-calendar"></i>
                        </div>
                        <a href="#" class="small-box-footer">
                            Más Detalles<i class="fa fa-arrow-circle-right"></i>
                        </a>
                    </div>

                </div>       

                <div class="col-md-4">

                    <div class="small-box bg-green">
                        <div class="inner">
                            <h3>{{ dashboard.ocupaciones }}</h3>
                            <p style="font-size:26px; font-weight: bold">Ocupaciones</p>
                        </div>
                        <div class="icon">
                            <i class="fa fa-bed"></i>
                        </div>
                        <a href="#" class="small-box-footer">
                            Más Detalles <i class="fa fa-arrow-circle-right"></i>
                        </a>
                    </div>

                </div>        

            </div>




            <div class="box box-success collapsed-box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-user"></i> <h3 class="box-title">  Huespedes </h3>
                    <input type="hidden" name="empresa_id" value="{{ reservaciones[0].empresa_id }}" >

                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body">

                    <table id="example1" class="table table-bordered table-striped" style="font-size: 12px">
                        <thead>

                            <tr>

                                <th style="width:80px"><i class="fa fa-file-text-o"></i>N° Documento  </th>
                                <th style="width:100px"><i class="fa fa-user"></i> Nombre Completo</th>
                                <th  style="width:40px" > <i class="fa fa-heartbeat"></i> Edad </th>                          
                                <th style="width:100px"><i class="fa fa-user"> </i>Email</th>
                                <th style="width:100px" > <i class="fa fa-bed"> </i> Teléfono </th>  
                            </tr>

                        </thead>
                        <tbody>

                            {% for cliente in clientes %}  
                            <tr>
                                <td>{{ cliente.cliente_documento }}</td>
                                <td>{{ cliente.cliente_nombre }} {{ cliente.cliente_apellido }}</td>
                                <td>{{ cliente.cliente_edad }}</td>           
                                <td>{{ cliente.cliente_correo }}</td>                                    
                                <td>{{ cliente.cliente_telefono }}</td>                                    

                            </tr>

                            {% endfor %}
                        </tbody>

                    </table>



                </div><!-- /.box-body -->
            </div><!-- /.box -->



            <div class="box box-danger collapsed-box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-calendar"></i> <h3 class="box-title">  Ocupaciones </h3>
                    <input type="hidden" name="empresa_id" value="{{ reservaciones[0].empresa_id }}" >

                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body">

                    <table id="example3" class="table table-bordered table-striped" style="font-size: 12px">
                        <thead>
                            <tr>
                                <th style="width:100px"><i class="fa fa-tag"></i> Confirmación  </th> 
                                <th style="width:70px">     <i class="fa fa-calendar"></i> Ent/Sal</th>
                                <th  style="width:150px" > <i class="fa fa-user"></i> Huesped Principal </th>
                                <th style="width:150px" > <i class="fa fa-bed"> </i> Habitación</th>                        

                            </tr>
                        </thead>
                        <tbody>
                            {% for ocupacion in checkin %}      
                            <tr>
                                <td style="font-weight: bold">
                                    <i class="fa fa-credit-card text-green"> </i>&nbsp;&nbsp;  <a href="?opcion=busquedacheckin&codigo={{ ocupacion.ocupacion_id }}">
                                        <i class="fa fa-plus"> </i>
                                        {{ ocupacion.reservacion_codigoid }}</a>
                                </td>
                                <td>{{ ocupacion.ocupacion_fechadesde }} <br>{{ ocupacion.ocupacion_fechahasta }}</td>
                                <td>{{ ocupacion.cliente_documento }} <br>  {{ ocupacion.cliente_nombre }} {{ ocupacion.cliente_apellido }}</td>
                                <td>
                                    <button class="btn btn-{{ ocupacion.habitacion_color  }} btn-xs ">{{ ocupacion.habitacion_nombre  }} {{ ocupacion.habitacion_categoria  }}</button> 



                                    {{ ocupacion.personas }} <i class="fa fa-users ">  </i>  &nbsp;&nbsp;
                                    <i class="fa fa-car"></i> &nbsp;&nbsp;  
                                    {{ ocupacion.cliente_edad }} <i class="fa fa-heartbeat "> </i>  
                                </td>    
                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>



                </div><!-- /.box-body -->
            </div><!-- /.box -->     





            <div class="box box-warning collapsed-box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-calendar"></i> <h3 class="box-title">  Reservaciones </h3>
                    <input type="hidden" name="empresa_id" value="{{ reservaciones[0].empresa_id }}" >

                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body">

                    <table id="example2" class="table table-bordered table-striped" style="font-size: 12px">
                        <thead>
                            <tr>
                                <th style="width:150px"><i class="fa fa-tags"></i> Reservación ID</th> 
                                <th style="width:100px">     <i class="fa fa-calendar"></i> Ent/Sal</th>
                                <th  style="width:120px" > <i class="fa fa-user"></i>Huesped Principal</th>
                                <th style="width:100px" > <i class="fa fa-bed"> </i> Habitación</th>                        
                                <th  style="width:100px" ></th>                    
                            </tr>
                        </thead>
                        <tbody>
                            {% for reservacion in reservaciones %}   
                            <tr>
                                <td>
                                    <strong>
                                        {{ reservacion.garantia|raw }}  

                                        <a href="?opcion=busquedareservacion&codigo={{ reservacion.codigo_id }}"> 
                                            <i class="fa fa-plus"></i> {{ reservacion.codigo_id }}
                                        </a>   
                                    </strong> 
                                </td>
                                <td>{{ reservacion.reservacion_desde }}<br>{{ reservacion.reservacion_hasta }}</td>
                                <td>{{ reservacion.cliente_documento }}<br>{{ reservacion.cliente_nombre  }} {{ reservacion.cliente_apellido  }}</td>
                                <td>
                                    <button type="submit" class="btn btn-{{ reservacion.reservacion_color  }} btn-xs ">
                                        {{ reservacion.reservacion_nombre  }} {{ reservacion.reservacion_categoria  }}</button> 

                                </td>                       
                                <td>                                         
                                    {{ reservacion.personas }} <i class="fa fa-users"></i>
                                </td>    
                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>



                </div><!-- /.box-body -->
            </div><!-- /.box -->



        </div><!--/.col (right) -->

        <div class="col-md-4">

            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Estado actual de las habitaciones</h3>
                </div><!-- /.box-header -->
                <div class="box-body no-padding">
                    <table class="table table-striped">

                        <tr>     
                            <td><span class="badge bg-green" style="font-size: 16px; padding: 6px">VL :70 </span></td>                          
                            <td><span class="badge bg-blue" style="font-size: 16px; padding: 6px">VS : 06</span></td>                                       
                            <td><span class="badge bg-yellow" style="font-size: 16px; padding: 6px">OL : 04</span></td>
                            <td><span class="badge bg-red" style="font-size: 16px; padding: 6px" >OS : 01 </span></td>                                           
                        </tr>                            
                    </table>
                    <table class="table table-striped">
                        <tr  style="font-size: 12px; font-weight: bold" >     
                            <td>SP</td>   <td><span class="badge bg-yellow" style="font-size: 12px; ">29 </span> 
                                <span  style="font-size: 12px;" class="badge bg-green">12 </span></td>                          
                            <td>PQ</td>   <td><span class="badge bg-yellow"  style="font-size: 12px;" >32</span> 
                                <span  style="font-size: 12px;" class="badge bg-green">16 </span></td>       
                            <td>PK</td>   <td><span class="badge bg-yellow"  style="font-size: 12px;" >31</span> 
                                <span  style="font-size: 12px;" class="badge bg-green">25 </span></td>                                   
                        </tr>   
                        <tr>     

                            <td></td>   <td></td>                      
                        </tr>                            
                    </table>
                </div><!-- /.box-body -->


            </div>  
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Tarifas</h3>
                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                        <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-7">
                            <div class="chart-responsive">
                                <canvas id="pieChart" height="150"></canvas>
                            </div><!-- ./chart-responsive -->
                        </div><!-- /.col -->
                        <div class="col-md-5">
                            <ul class="chart-legend clearfix">
                                <li><i class="fa fa-circle-o text-red"></i> 10 Expedia</li>
                                <li><i class="fa fa-circle-o text-green"></i> 30 Rack  </li>
                                <li><i class="fa fa-circle-o text-yellow"></i> 25  Corporativas </li>
                                <li><i class="fa fa-circle-o text-light-blue"></i> 5 Uso Casa </li>

                            </ul>
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.box-body -->

            </div><!-- /.box -->




        </div>





    </div>   <!-- /.row -->
</section><!-- /.content -->





<section class="content">


    <div class="row">
        <div class="col-md-12 col-sm-6 col-xs-12">


            <div class="box box-success collapsed-box box-solid">
                <div class="box-header with-border">
                    <i class="fa fa-wrench"></i> <h3 class="box-title">  Supervisiones </h3>


                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                    </div><!-- /.box-tools -->
                </div><!-- /.box-header -->
                <div class="box-body">

                    <table id="example1" class="table table-bordered table-striped">
                        <thead>
                            <tr>
                                <th style="width:70px"><i class="fa fa-bed"></i> Habitación  </th> 
                                <th style="width:70px">     <i class="fa fa-calendar-o"></i> Fecha </th>
                                <th style="width:70px">     <i class="fa fa-clock-o"></i> Hora </th>                                
                                <th style="width:200px">     <i class="fa fa-wrench"></i> Falla </th>
                                <th style="width:200px">     <i class="fa fa-eye"></i> Observación </th>                  

                            </tr>
                        </thead>
                        <tbody>
                            {% for supervision in supervisiones %}      
                            <tr>
                                <td style="font-weight: bold">
                                    {{ supervision.supervision_solucionado|raw }} &nbsp;&nbsp;  <a href="?opcion=busquedasupervision&codigo={{ supervision.supervision_id }}">

                                        {{ supervision.habitacion_nombre }}  {{ supervision.habitacion_categoria }}</a>
                                </td>
                                <td>{{ supervision.supervision_fecha }}</td>
                                <td>{{ supervision.supervision_hora }}</td>
                                <td>{{ supervision.falla_nombre }}</td>
                                <td><small>{{ supervision.supervision_observacion }}</small></td>

                            </tr>
                            {% endfor %}
                        </tbody>

                    </table>




                </div><!-- /.box-body -->
            </div><!-- /.box -->

        </div>
    </div>
</section>








{% endblock %}

{% block javascript %}

<script src="plugins/chartjs/Chart.min.js" type="text/javascript"></script>
<script src="dist/js/demo.js" type="text/javascript"></script>

<script src="plugins/datatables/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="plugins/datatables/dataTables.bootstrap.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {

    $("#example1").dataTable();
    $("#example2").dataTable();
    $("#example3").dataTable();
});

$(function() {

    //- PIE CHART -
    //-------------
    // Get context with jQuery - using jQuery's .get() method.
    var pieChartCanvas = $("#pieChart").get(0).getContext("2d");
    var pieChart = new Chart(pieChartCanvas);
    var PieData = [
        {
            value: 10,
            color: "#f56954",
            highlight: "#f56954",
            label: "Expedia"
        },
        {
            value: 30,
            color: "#00a65a",
            highlight: "#00a65a",
            label: "30"
        },
        {
            value: 25,
            color: "#f39c12",
            highlight: "#f39c12",
            label: "Corporativa"
        },
        {
            value: 5,
            color: "#00c0ef",
            highlight: "#00c0ef",
            label: "Uso Casa"
        }
    ];
    var pieOptions = {
        //Boolean - Whether we should show a stroke on each segment
        segmentShowStroke: true,
        //String - The colour of each segment stroke
        segmentStrokeColor: "#fff",
        //Number - The width of each segment stroke
        segmentStrokeWidth: 2,
        //Number - The percentage of the chart that we cut out of the middle
        percentageInnerCutout: 50, // This is 0 for Pie charts
        //Number - Amount of animation steps
        animationSteps: 100,
        //String - Animation easing effect
        animationEasing: "easeOutBounce",
        //Boolean - Whether we animate the rotation of the Doughnut
        animateRotate: true,
        //Boolean - Whether we animate scaling the Doughnut from the centre
        animateScale: false,
        //Boolean - whether to make the chart responsive to window resizing
        responsive: true,
        // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
        maintainAspectRatio: false
                //String - A legend template
    };
    //Create pie or douhnut chart
    // You can switch between pie and douhnut using the method below.
    pieChart.Doughnut(PieData, pieOptions);

});
</script>

{% endblock %}







